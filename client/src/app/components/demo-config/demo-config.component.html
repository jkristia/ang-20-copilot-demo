<div class="config-container">
  <button mat-button color="primary" class="back-button" (click)="goBack()">
    <mat-icon>arrow_back</mat-icon>
    Back to Posts
  </button>

  <mat-card class="config-card">
    <mat-card-header>
      <mat-card-title>Demo Configuration</mat-card-title>
      <mat-card-subtitle class="last-changed">
        Last changed: {{ lastChanged() | date:'medium' }}
      </mat-card-subtitle>
    </mat-card-header>

    <mat-card-content>
      <div class="form-field">
        <mat-slide-toggle
          [checked]="config().enabled"
          [disabled]="!isIdle()"
          (change)="onEnabledChange($event.checked)"
          color="primary"
        >
          Enabled
        </mat-slide-toggle>
      </div>

      <mat-form-field appearance="outline" class="form-field">
        <mat-label>Float Value</mat-label>
        <input
          matInput
          type="number"
          step="0.01"
          [min]="validation.FLOAT_MIN"
          [max]="validation.FLOAT_MAX"
          [value]="config().float_value"
          [disabled]="!isIdle()"
          (change)="onFloatValueChange($event)"
        />
        <mat-hint>Range: {{ validation.FLOAT_MIN }} to {{ validation.FLOAT_MAX }}</mat-hint>
      </mat-form-field>

      <mat-form-field appearance="outline" class="form-field">
        <mat-label>Integer Value</mat-label>
        <input
          matInput
          type="number"
          step="1"
          [min]="validation.INT_MIN"
          [max]="validation.INT_MAX"
          [value]="config().int_value"
          [disabled]="!isIdle()"
          (change)="onIntValueChange($event)"
        />
        <mat-hint>Range: {{ validation.INT_MIN }} to {{ validation.INT_MAX }}</mat-hint>
      </mat-form-field>

      <mat-form-field appearance="outline" class="form-field">
        <mat-label>String Value</mat-label>
        <input
          matInput
          type="text"
          [attr.maxlength]="validation.STRING_MAX_LENGTH"
          [value]="config().string_value"
          [disabled]="!isEnabled() || !isIdle()"
          (input)="onStringValueChange($any($event.target).value)"
        />
        <mat-hint>Max {{ validation.STRING_MAX_LENGTH }} characters</mat-hint>
      </mat-form-field>

      <mat-form-field appearance="outline" class="form-field">
        <mat-label>Select Value</mat-label>
        <mat-select
          [value]="config().select_value"
          [disabled]="!isEnabled() || !isIdle()"
          (selectionChange)="onSelectValueChange($event.value)"
        >
          @for (option of selectOptions; track option) {
            <mat-option [value]="option">
              {{ selectDescriptions[option] }}
            </mat-option>
          }
        </mat-select>
      </mat-form-field>

      <mat-accordion class="settings-accordion">
        <mat-expansion-panel>
          <mat-expansion-panel-header>
            <mat-panel-title>Network Settings</mat-panel-title>
          </mat-expansion-panel-header>
          <app-network-settings />
        </mat-expansion-panel>

        <mat-expansion-panel>
          <mat-expansion-panel-header>
            <mat-panel-title>Display Settings</mat-panel-title>
          </mat-expansion-panel-header>
          <app-display-settings />
        </mat-expansion-panel>
      </mat-accordion>
    </mat-card-content>
  </mat-card>
</div>
